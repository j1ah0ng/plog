---
import BaseLayout from './BaseLayout.astro';
import TOC from '../components/TOC.astro';

interface Heading {
  depth: number;
  slug: string;
  text: string;
}

interface Props {
  frontmatter: {
    title: string;
    date: Date;
    description: string;
  };
  headings?: Heading[];
}

const { frontmatter, headings = [] } = Astro.props;

const formatDate = (date: Date) => {
  return new Intl.DateTimeFormat('en-US', {
    year: 'numeric',
    month: 'long',
    day: 'numeric',
  }).format(date);
};
---

<BaseLayout title={frontmatter.title} description={frontmatter.description}>
  <TOC headings={headings} />
  <article>
    <h1>{frontmatter.title}</h1>
    <p class="subtitle">
      <time datetime={frontmatter.date.toISOString()}>
        {formatDate(frontmatter.date)}
      </time>
    </p>
    <section>
      <slot />
    </section>
    <section>
      <p><a href="/plog/">&larr; back to all posts</a></p>
    </section>
  </article>
</BaseLayout>
